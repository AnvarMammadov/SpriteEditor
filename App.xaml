<Application x:Class="SpriteEditor.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:SpriteEditor"
             xmlns:viewmodels="clr-namespace:SpriteEditor.ViewModels"
             xmlns:views="clr-namespace:SpriteEditor.Views" xmlns:converters="clr-namespace:SpriteEditor.Converters"
             StartupUri="MainWindow.xaml">
    <Application.Resources>


        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Languages/Lang.en-US.xaml"/>

            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

            <converters:OffsetConverter x:Key="OffsetConverter"/>
            <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>

            <DropShadowEffect x:Key="NodeShadowEffect" 
                              BlurRadius="15" 
                              ShadowDepth="2" 
                              Direction="315" 
                              Color="Black" 
                              Opacity="0.4"/>



            <!-- =============================================== -->
            <!-- RƏNG PALİTRASI (MODERN DARK THEME) -->
            <!-- =============================================== -->

            <!-- Əsas Fonlar -->
            <SolidColorBrush x:Key="Brush.Bg.Deep" Color="#111827"/>
            <!-- Ən tünd (Canvas arxası) -->
            <SolidColorBrush x:Key="Brush.Bg.Panel" Color="#1F2937"/>
            <!-- Panellər -->
            <SolidColorBrush x:Key="Brush.Bg.Input" Color="#374151"/>
            <!-- Inputlar -->

            <!-- Vurğu (Accent) Rəngləri -->
            <SolidColorBrush x:Key="Brush.Accent.Primary" Color="#EAB308"/>
            <!-- Sarı/Qızılı (Sümüklər üçün) -->
            <SolidColorBrush x:Key="Brush.Accent.Blue" Color="#3B82F6"/>
            <!-- Mavi (Seçim üçün) -->
            <SolidColorBrush x:Key="Brush.Accent.Green" Color="#22C55E"/>
            <!-- Yaşıl (Təsdiq) -->
            <SolidColorBrush x:Key="Brush.Accent.Red" Color="#EF4444"/>
            <!-- Qırmızı (Silmək) -->

            <!-- Mətn Rəngləri -->
            <SolidColorBrush x:Key="Brush.Text.Primary" Color="#F9FAFB"/>
            <!-- Ağ -->
            <SolidColorBrush x:Key="Brush.Text.Secondary" Color="#9CA3AF"/>
            <!-- Boz -->
            <SolidColorBrush x:Key="Brush.Border" Color="#4B5563"/>
            <!-- Çərçivələr -->

            <!-- =============================================== -->
            <!-- İKONLAR (Path Geometries) -->
            <!-- =============================================== -->
            <Geometry x:Key="Icon.Home">M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z M9 22V12h6v10</Geometry>
            <Geometry x:Key="Icon.Grid">M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z</Geometry>
            <Geometry x:Key="Icon.Bone">M12 5c-1.5 0-2.5 1-2.5 2.5 0 .5.15 1 .4 1.4L6.5 12.3c-.4-.3-.9-.4-1.5-.4-1.7 0-3 1.3-3 3s1.3 3 3 3c1.5 0 2.8-1.1 2.9-2.5l3.4-3.4c.4.3.9.4 1.4.4s1-.1 1.4-.4l3.4 3.4c.1 1.4 1.4 2.5 2.9 2.5 1.7 0 3-1.3 3-3s-1.3-3-3-3c-.6 0-1.1.1-1.5.4L14.1 8.9c.3-.4.4-.9.4-1.4 0-1.5-1-2.5-2.5-2.5z</Geometry>
            <Geometry x:Key="Icon.Edit">M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7 M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z</Geometry>
            <Geometry x:Key="Icon.Eraser">M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z</Geometry>
            <Geometry x:Key="Icon.Play">M5 3l14 9-14 9V3z</Geometry>
            <Geometry x:Key="Icon.Pause">M6 4h4v16H6zM14 4h4v16h-4z</Geometry>
            <Geometry x:Key="Icon.Stop">M6 6h12v12H6z</Geometry>
            <Geometry x:Key="Icon.Convert">M4 14h12v-2H4v2z m16-4L16 6v3H8v2h8v3z m-4 8v-3H4v-2h12v-3l4 4z</Geometry>
            <Geometry x:Key="Icon.Settings">M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z</Geometry>
            <Geometry x:Key="Icon.Minimize">M0,5 H10 V6 H0 Z</Geometry>
            <Geometry x:Key="Icon.Maximize">M1,1 H9 V9 H1 Z M0,0 V10 H10 V0 Z</Geometry>
            <Geometry x:Key="Icon.Close">M0,0 L10,10 M0,10 L10,0</Geometry>
            <Geometry x:Key="Icon.Film">M18,4l2,4h-3l-2-4h-2l2,4h-3l-2-4H8l2,4H7L5,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V4H18z M8,17H6v-2h2V17z M8,13H6v-2h2V13z M8,9H6V7h2V9z M18,17h-2v-2h2V17z M18,13h-2v-2h2V13z M18,9h-2V7h2V9z</Geometry>
            <Geometry x:Key="Icon.Packer">M4,4H10V10H4V4M14,4H20V8H14V4M4,14H8V20H4V14M12,12H20V20H12V12M10,14H12V20H10V14M14,10H20V12H14V10</Geometry>
            <!-- =============================================== -->
            <!-- STILLƏR (STYLES) -->
            <!-- =============================================== -->

            <!-- Modern Button Style -->
            <Style TargetType="Button" x:Key="Style.Button.Primary">
                <Setter Property="Background" Value="{StaticResource Brush.Bg.Input}"/>
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="12,8"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#4B5563"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter Property="Background" Value="#374151"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Accent Button Style (Yellow/Gold) -->
            <Style TargetType="Button" x:Key="Style.Button.Accent" BasedOn="{StaticResource Style.Button.Primary}">
                <Setter Property="Background" Value="{StaticResource Brush.Accent.Primary}"/>
                <Setter Property="Foreground" Value="#111827"/>
                <!-- Qara mətn -->
                <Setter Property="BorderThickness" Value="0"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" Value="0.9"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- Naviqasiya Düyməsi (Sidebar) -->
            <Style TargetType="Button" x:Key="Style.Button.Nav">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Secondary}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Height" Value="40"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Padding" Value="15,0"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="6" Margin="4,2">
                                <ContentPresenter VerticalAlignment="Center" Margin="{TemplateBinding Padding}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#374151"/>
                                    <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Modern TextBox -->
            <Style TargetType="TextBox">
                <Setter Property="Background" Value="{StaticResource Brush.Bg.Deep}"/>
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="8,6"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                                <ScrollViewer x:Name="PART_ContentHost"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter Property="BorderBrush" Value="{StaticResource Brush.Accent.Blue}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Tool Toggle Button (RadioButton kimi görünən) -->
            <Style TargetType="RadioButton" x:Key="Style.RadioButton.Tool">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="RadioButton">
                            <Border x:Name="Border"
                                Background="{StaticResource Brush.Bg.Input}"
                                BorderBrush="{StaticResource Brush.Border}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="10,8"
                                Margin="0,0,0,8"
                                Cursor="Hand">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <!-- İkon yeri (ContentPresenter) -->
                                    <ContentPresenter Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Accent.Blue}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Accent.Blue}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource Brush.Accent.Blue}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="30" />
                    </Grid.ColumnDefinitions>
                    <Border x:Name="Border" Grid.ColumnSpan="2" CornerRadius="4" Background="{StaticResource Brush.Bg.Input}" BorderBrush="{StaticResource Brush.Border}" BorderThickness="1" />
                    <Border Grid.Column="0" CornerRadius="4,0,0,4" Margin="1" Background="Transparent" />
                    <Path x:Name="Arrow" Grid.Column="1" Fill="{StaticResource Brush.Text.Secondary}" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M0,0 L4,4 L8,0 Z"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter TargetName="Border" Property="Background" Value="#4B5563" />
                    </Trigger>
                    <Trigger Property="IsChecked" Value="true">
                        <Setter TargetName="Border" Property="Background" Value="#4B5563" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
                <Border x:Name="PART_ContentHost" Focusable="False" Background="{TemplateBinding Background}" />
            </ControlTemplate>

            <Style x:Key="DarkComboBoxStyle" TargetType="{x:Type ComboBox}">
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
                <Setter Property="Background" Value="{StaticResource Brush.Bg.Input}"/>
                <Setter Property="SnapsToDevicePixels" Value="true"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
                <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
                <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ComboBox}">
                            <Grid>
                                <ToggleButton Name="ToggleButton" Template="{StaticResource ComboBoxToggleButton}" Grid.Column="2" Focusable="false" IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}" ClickMode="Press"/>
                                <ContentPresenter Name="ContentSite" IsHitTestVisible="False" Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Margin="10,3,23,3" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                <TextBox x:Name="PART_EditableTextBox" Style="{x:Null}" Template="{StaticResource ComboBoxTextBox}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="3,3,23,3" Focusable="True" Background="Transparent" Visibility="Hidden" IsReadOnly="{TemplateBinding IsReadOnly}"/>
                                <Popup Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}" AllowsTransparency="True" Focusable="False" PopupAnimation="Slide">
                                    <Grid Name="DropDown" SnapsToDevicePixels="True" MinWidth="{TemplateBinding ActualWidth}" MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                        <Border x:Name="DropDownBorder" Background="{StaticResource Brush.Bg.Panel}" BorderThickness="1" BorderBrush="{StaticResource Brush.Border}" CornerRadius="4"/>
                                        <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                        </ScrollViewer>
                                    </Grid>
                                </Popup>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="HasItems" Value="false">
                                    <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                                </Trigger>
                                <Trigger Property="IsGrouping" Value="true">
                                    <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Resources>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="SnapsToDevicePixels" Value="true"/>
                        <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="10,8"/>
                        <Setter Property="Margin" Value="0,2"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBoxItem">
                                    <Border Name="Border" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="4">
                                        <ContentPresenter />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsHighlighted" Value="true">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Accent.Blue}"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Style.Resources>
            </Style>

            <Style TargetType="Button" x:Key="Style.Button.Success" BasedOn="{StaticResource Style.Button.Primary}">
                <Setter Property="Background" Value="{StaticResource Brush.Accent.Green}"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" Value="0.9"/>
                    </Trigger>
                </Style.Triggers>
            </Style>


            <Style x:Key="ModernScrollBar" TargetType="{x:Type ScrollBar}">
                <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
                <Setter Property="Foreground" Value="{StaticResource Brush.Border}" />
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="Width" Value="8" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ScrollBar}">
                            <Grid x:Name="GridRoot" Width="8" Background="{TemplateBinding Background}">
                                <Track x:Name="PART_Track" IsDirectionReversed="true" Focusable="false">
                                    <Track.Thumb>
                                        <Thumb x:Name="Thumb">
                                            <Thumb.Template>
                                                <ControlTemplate TargetType="{x:Type Thumb}">
                                                    <Border x:Name="ThumbBorder" Background="#4B5563" CornerRadius="4" Margin="1"/>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ThumbBorder" Property="Background" Value="{StaticResource Brush.Accent.Blue}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsDragging" Value="True">
                                                            <Setter TargetName="ThumbBorder" Property="Background" Value="{StaticResource Brush.Accent.Blue}"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Thumb.Template>
                                        </Thumb>
                                    </Track.Thumb>
                                </Track>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="{x:Type ScrollViewer}">
                <Setter Property="OverridesDefaultStyle" Value="True" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ScrollViewer}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <ScrollContentPresenter Grid.Column="0" />
                                <ScrollBar Name="PART_VerticalScrollBar"
                                               Grid.Column="1"
                                               Value="{TemplateBinding VerticalOffset}"
                                               Maximum="{TemplateBinding ScrollableHeight}"
                                               ViewportSize="{TemplateBinding ViewportHeight}"
                                               Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                               Style="{StaticResource ModernScrollBar}" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Context Menu design for settings -->
            <Style TargetType="ContextMenu">
                <Setter Property="Background" Value="{StaticResource Brush.Bg.Panel}"/>
                <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                <Setter Property="HasDropShadow" Value="True"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ContextMenu">
                            <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Padding="5"
                        CornerRadius="6">
                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <Style TargetType="MenuItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Primary}"/>
                <Setter Property="Padding" Value="10,8"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="MenuItem">
                            <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                <ContentPresenter Content="{TemplateBinding Header}" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsHighlighted" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Brush.Accent.Blue}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Views (Məlumat Şablonları) -->
            <DataTemplate DataType="{x:Type viewmodels:HomeViewModel}">
                <views:HomeView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:SpriteSlicerViewModel}">
                <views:SpriteSlicerView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:BackgroundEraserViewModel}">
                <views:BackgroundEraserView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:RiggingViewModel}">
                <views:RiggingView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:FormatConverterViewModel}">
                <views:FormatConverterView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:FrameAnimatorViewModel}">
                <views:FrameAnimatorView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:TexturePackerViewModel}">
                <views:TexturePackerView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:StoryEditorViewModel}">
                <views:StoryEditorView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:StoryPlayerViewModel}">
                <views:StoryEditorView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewmodels:SvgToolViewModel}">
                <views:SvgToolView />
            </DataTemplate>

        </ResourceDictionary>
    </Application.Resources>
</Application>